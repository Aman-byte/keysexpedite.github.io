<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="cartpagetrail.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat&family=Nunito+Sans:opsz,wght@6..12,500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />

    <title>KeysExpedite</title>
</head>
<body>

<div class="navbar">
    <a href="index.html">
    <div class="logo">
        <img src="Circle.png" alt="Logo">
    </div></a>

    <ul class="nav-links" id="navLinks">
        <li><a href="categorypage.html">Products</a></li>

        <li><a href="showcase.html">Showcase</a></li>
    </ul>

    <div class="icons">
        <div class="search">
            <form action="#">
                <input type="text" id="searchInput" oninput="performSearch()" placeholder="Search Products" name="search">
                <ul id="searchResults"></ul>
            </form>
        </div>
        <a href="logintrail.html" style="text-decoration: none; color: inherit;">
        <span class="material-symbols-outlined" style="padding-right: 5px; padding-left: 5px;">person</span> </a>
        <a href="cartpagetrial.html" style="text-decoration: none; color: inherit;">
        <span class="material-symbols-outlined" style="padding-right: 5px;">shopping_bag</span></a>
    </div>

    <div class="hamburger-menu" id="menuToggle">
        <div class="line"></div>
        <div class="line"></div>
        <div class="line"></div>
    </div>
</div>

<!-- cart design starts from here --> 
<div class="productwrap">
<div id="product-container-product1">
    <img src="final keyboard/RK84/RK84B0.png" alt="Keyboard">
    <h2>Royal Kludge 84</h2>
    <p>Color: <span id="selectedColor1">User Selected Color</span></p>
    
    <p>Switch: <span id="selectedSwitch1">User Selected Switch</span></p>

    <p>Price: $<span id="price1">69.99</span></p>
    
    <label for="quantity1">Quantity:</label>
    <button onclick="changeQuantity(1, -1)">‚ûñ</button>
    <input type="text" id="quantity1" class="quantity" value="0" readonly>
    <button onclick="changeQuantity(1, 1)">‚ûï</button>
    <button onclick="removeItem(1)">üóëÔ∏è</button>
</div>

<div id="product-container-product2">
    <img src="final keyboard/mouse/mouse0.png" alt="Mouse">
    <h2>Razer Viper Mini</h2>
   
    <p>Price: $<span id="price2">22.99</span></p>
    
    <label for="quantity2">Quantity:</label>
    <button onclick="changeQuantity(2, -1)">‚ûñ</button>
    <input type="text" id="quantity2" class="quantity" value="0" readonly>
    <button onclick="changeQuantity(2, 1)">‚ûï</button>

    <button onclick="removeItem(2)">üóëÔ∏è</button>
</div>

<div id="product-container-product3">
    <img src="final keyboard/Switch/JWK-Ultimate-Black-1.png" alt="Product Photo">
    <h2>JWK Ultimate Black</h2>

    <p>Spring: <span id="selectedSpring3">User Selected Switch</span></p>

    <p>Price: $<span id="price3">17.99</span></p>
    
    <label for="quantity3">Quantity:</label>
    <button onclick="changeQuantity(3, -1)">‚ûñ</button>
    <input type="text" id="quantity3" class="quantity" value="0" readonly>
    <button onclick="changeQuantity(3, 1)">‚ûï</button>

    <button onclick="removeItem(3)">üóëÔ∏è</button>
</div>
</div>
<div id="grandTotal">Grand Total: $0.00</div>

<!-- cart design ends here -->
<button id="Bill" onclick="generateBill()">Generate Bill</button>



<!-- footer starts here -->
<div class="footer">
    <div class="footer-section">
        <h2>Address</h2>
        <p>123 Street,</p>
        <p>Delhi, North Delhi,</p>
        <p>India, 110000</p>
    </div>
    <div class="footer-section">
        <h2>Information</h2>
        <p>About Us</p>
        <p>Contact Us</p>
        <p>Terms & Conditions</p>
    </div>
    <div class="footer-section">
        <h2>Newsletter</h2>
        <p>Subscribe to our newsletter</p>
        <p><input type="email" placeholder="Footer is Only Design">
        <button style="width: 100px; height: 30px; background-color: red; color: white;">Subscribe</button></p>
    </div>
    <div class="footer-logo">
        <!-- <img src="Half Logo Kxp.png" alt="Company Logo"> -->
        <img src="Circle.png" alt="Company Logo" style="height: 200px;">
    </div>
</div>

<!-- footer ends here -->
<script src="app.js"></script>
<script>
    function changeQuantity(productId, change) {
        var quantityInput = document.getElementById("quantity" + productId);
        var currentQuantity = parseInt(quantityInput.value);
        var newQuantity = currentQuantity + change;

        // Ensure the new quantity is within the range 0 to 10
        newQuantity = Math.min(Math.max(newQuantity, 0), 10);

        quantityInput.value = newQuantity;
        updateGrandTotal();
    }

    function removeItem(productId) {
        var productContainer = document.getElementById("product-container-product" + productId);
        productContainer.parentNode.removeChild(productContainer);
        updateGrandTotal();
    }

    function updateGrandTotal() {
        var grandTotal = 0;

        // Check if the product and quantity elements exist before accessing them
        if (document.getElementById("price1") && document.getElementById("quantity1")) {
            var price1 = parseFloat(document.getElementById("price1").textContent);
            var quantity1 = parseInt(document.getElementById("quantity1").value);
            grandTotal += price1 * quantity1;
        }

        if (document.getElementById("price2") && document.getElementById("quantity2")) {
            var price2 = parseFloat(document.getElementById("price2").textContent);
            var quantity2 = parseInt(document.getElementById("quantity2").value);
            grandTotal += price2 * quantity2;
        }

        if (document.getElementById("price3") && document.getElementById("quantity3")) {
            var price3 = parseFloat(document.getElementById("price3").textContent);
            var quantity3 = parseInt(document.getElementById("quantity3").value);
            grandTotal += price3 * quantity3;
        }

        document.getElementById("grandTotal").textContent = "Grand Total: $" + grandTotal.toFixed(2);
    }
</script>

<script>
    function generateBill() {
        // Additional information
        var storeAddress = `
            KeysExpedite
            123 Street,
            Delhi, North Delhi,
            India, 110000
        `;

        var invoiceDetails = `
            Invoice
            Number: KXP${Math.floor(Math.random() * 10000000)}
            Date: ${getCurrentDate()}
        `;

        var paymentDetails = "Payment Type: Net Banking";

        var thankYouMessage = "Thank You For Shopping! We hope to see you soon.";

        // Gather information
        var billContent = storeAddress + "\n\n" + invoiceDetails + "\n\n";

        function addProductToBill(productName, details, price, quantity) {
            if (quantity > 0) {
                billContent += `
                    Product Name: ${productName}
                    ${details}
                    Price: $${price.toFixed(2)}
                    Quantity: ${quantity}
                    
                `;
            }
        }

        // Product 1
        var productName1 = "Royal Kludge 84";
        var color1Element = document.getElementById("selectedColor1");
        var switch1Element = document.getElementById("selectedSwitch1");
        var price1Element = document.getElementById("price1");
        var quantity1Element = document.getElementById("quantity1");

        var color1 = color1Element ? color1Element.textContent : "N/A";
        var switch1 = switch1Element ? switch1Element.textContent : "N/A";
        var price1 = price1Element ? parseFloat(price1Element.textContent) : 0;
        var quantity1 = quantity1Element ? parseInt(quantity1Element.value) : 0;

        addProductToBill(productName1, `Color: ${color1}\nSwitch: ${switch1}`, price1, quantity1);

        // Product 2
        // ... (similar checks for other products)
        // Product 2
var productName2 = "Razer Viper Mini";
var price2Element = document.getElementById("price2");
var quantity2Element = document.getElementById("quantity2");

var price2 = price2Element ? parseFloat(price2Element.textContent) : 0;
var quantity2 = quantity2Element ? parseInt(quantity2Element.value) : 0;

addProductToBill(productName2, "", price2, quantity2);

// Product 3
var productName3 = "JWK Ultimate Black";
var spring3Element = document.getElementById("selectedSpring3"); // Corrected ID
var price3Element = document.getElementById("price3");
var quantity3Element = document.getElementById("quantity3");

var spring3 = spring3Element ? spring3Element.textContent : "N/A"; // Corrected variable name
var price3 = price3Element ? parseFloat(price3Element.textContent) : 0;
var quantity3 = quantity3Element ? parseInt(quantity3Element.value) : 0;

addProductToBill(productName3, `Spring: ${spring3}`, price3, quantity3);

        // Grand Total
        var grandTotalElement = document.getElementById("grandTotal");
        var grandTotal = grandTotalElement ? parseFloat(grandTotalElement.textContent.split('$')[1]) : 0;
        billContent += `\nGrand Total: $${grandTotal.toFixed(2)}`;

        // Additional information
        billContent += "\n\n" + paymentDetails + "\n\n" + thankYouMessage;

        // Create a Blob with the bill content
        var blob = new Blob([billContent], { type: "text/plain" });

        // Create a link element and trigger a click to download the bill
        var a = document.createElement("a");
        a.href = URL.createObjectURL(blob);
        a.download = "bill.txt";
        a.click();

         // Check if at least one product has a quantity greater than 0
    if (
        (quantity1Element ? parseInt(quantity1Element.value) : 0) === 0 &&
        (quantity2Element ? parseInt(quantity2Element.value) : 0) === 0 &&
        (quantity3Element ? parseInt(quantity3Element.value) : 0) === 0
    ) {
        // Display alert if all quantities are 0
        document.getElementById("Bill").disabled = true;
        alert("Quantity of products should be greater than 0 to generate the bill.");
        return;
    }

    }

    function getCurrentDate() {
        var today = new Date();
        var dd = String(today.getDate()).padStart(2, '0');
        var mm = String(today.getMonth() + 1).padStart(2, '0'); // January is 0!
        var yyyy = today.getFullYear();

        return mm + '/' + dd + '/' + yyyy;
    }


</script>

</html>
